<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lista pracowników</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
<script>
let peopleList = [];

function checking(object, listObject){
    let parseObject = JSON.stringify(object)
    for(let index= 0; index<listObject.length; index++){
        if(parseObject === JSON.stringify(listObject[index])){
            return false
        }
        return true
    }
}

$(document).ready(function() {
    let table = $('#peopleTable').DataTable({
        columns: [
            { data: 'name' },
            { data: 'surname' },
            { data: 'email' },
			{ data: 'date' }
        ]
    });

    // Dodawanie danych do tabeli
    peopleList.forEach(function(person) {
        table.row.add(person).draw();
    });

    // Funkcja do dodawania nowego elementu
    function addNewPerson(name, surname, email, date) {
        let newPerson = { name: name, surname: surname, email: email, date: date, action: '<button class = "removeButton">Usun</button>' };
        table.row.add(newPerson).draw();
    }
	
	document.getElementById("myForm").addEventListener("submit", function(event) {
		event.preventDefault(); // Zapobiega domyślnej akcji formularza

		// Pobierz wartości z pól formularza
		let name = document.getElementById("name").value;
		let surname = document.getElementById("surname").value;
		let email = document.getElementById("email").value;
		let date = document.getElementById("date").value;
		
		// Utwórz obiekt zawierający dane z formularza
		let person = {
			name: name,
			surname: surname,
			email: email,
			date: date
		};

		// Dodaj obiekt do listy obiektów
		addPersonToList(person);
	
		//Dodanie nowego wiersza do datatables
		addNewPerson(name, surname, email, date);

		// Wyczyść pola formularza
		document.getElementById("myForm").reset();
	});

	function addPersonToList(person) {
		// Utwórz element <li> zawierający dane osoby\
        if(checking(person, peopleList) === true){

            let listItem = document.createElement("li");
            listItem.textContent = "Imię: " + person.name + ", Nazwisko: " + person.surname + ", Email: " + person.email + ", Data zatr.: " + person.date;

            // Dodaj element <li> do listy
            document.getElementById("peopleList").appendChild(listItem);
	}else {
            alert("NON")
        }
    }
});
</script>
<link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.css">
</head>
<body>

<h2>Dodawanie do listy obiektów</h2>

<form id="myForm">
    <label for="name">Imię:</label><br>
    <input type="text" id="name" name="name"><br>
    <label for="surname">Nazwisko:</label><br>
    <input type="text" id="surname" name="surname"><br>
    <label for="email">Email:</label><br>
    <input type="email" id="email" name="email"><br>
	<label for="date">Data zatrudnienia:</label><br>
    <input type="date" id="date" name="date"><br><br>
    <input type="submit" value="Dodaj do listy">
</form>

<ul id="peopleList"></ul>

<h2>Lista osób - DataTables</h2>

<table id="peopleTable" class="display">
    <thead>
        <tr>
            <th>Imię</th>
            <th>Nazwiski</th>
            <th>Email</th>
			<th>Data</th>
        </tr>
    </thead>
    <tbody>
        <!-- Dane będą dodawane dynamicznie -->
    </tbody>
</table>

<script>


</script>

</body>
</html>